<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AHP Decisor Universal</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="app-header">
            <h1>üéØ AHP Decisor Universal</h1>
            <p class="subtitle">M√©todo Anal√≠tico de Hierarquia para Decis√µes Complexas</p>
        </header>

        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-step active" data-step="1">
                <div class="step-number">1</div>
                <div class="step-label">Objetivo</div>
            </div>
            <div class="progress-line"></div>
            <div class="progress-step" data-step="2">
                <div class="step-number">2</div>
                <div class="step-label">Crit√©rios</div>
            </div>
            <div class="progress-line"></div>
            <div class="progress-step" data-step="3">
                <div class="step-number">3</div>
                <div class="step-label">Alternativas</div>
            </div>
            <div class="progress-line"></div>
            <div class="progress-step" data-step="4">
                <div class="step-number">4</div>
                <div class="step-label">Julgamentos</div>
            </div>
            <div class="progress-line"></div>
            <div class="progress-step" data-step="5">
                <div class="step-number">5</div>
                <div class="step-label">Resultados</div>
            </div>
        </div>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Passo 1: Objetivo -->
            <section id="step-1" class="step-content active">
                <h2>üìå Defina o Objetivo da Decis√£o</h2>
                <p class="help-text">Descreva o que voc√™ deseja alcan√ßar ou decidir</p>
                <div class="form-group">
                    <label for="objective-input">Objetivo:</label>
                    <input type="text" id="objective-input" placeholder="Ex: Comprar um Carro Novo" class="input-field">
                    <small class="input-hint">Seja claro e espec√≠fico sobre sua decis√£o</small>
                </div>
                <div class="actions">
                    <button class="btn btn-secondary" id="load-project-btn">üìÇ Carregar Projeto</button>
                    <button class="btn btn-primary" onclick="nextStep()">Pr√≥ximo ‚Üí</button>
                </div>
            </section>

            <!-- Passo 2: Crit√©rios -->
            <section id="step-2" class="step-content">
                <h2>üìä Defina os Crit√©rios de Avalia√ß√£o</h2>
                <p class="help-text">Adicione os fatores importantes para sua decis√£o (m√≠nimo 2, m√°ximo 10)</p>
                
                <!-- Toggle para modo de peso -->
                <div class="weight-mode-toggle">
                    <label class="toggle-label">
                        <input type="checkbox" id="manual-weights-toggle" onchange="toggleWeightMode()">
                        <span class="toggle-text">
                            <span class="toggle-icon">‚öñÔ∏è</span>
                            Definir pesos manualmente (ao inv√©s de comparar depois)
                        </span>
                    </label>
                    <small class="toggle-hint">Ative se voc√™ j√° sabe a import√¢ncia relativa de cada crit√©rio</small>
                </div>

                <div class="form-group">
                    <div class="input-with-button">
                        <input type="text" id="criteria-input" placeholder="Ex: Pre√ßo, Seguran√ßa, Consumo" class="input-field">
                        <input type="number" id="criteria-weight-input" placeholder="Peso (%)" class="input-field weight-input" min="0" max="100" step="0.1" style="display: none;">
                        <button class="btn btn-add" onclick="addCriterion()">‚ûï Adicionar</button>
                    </div>
                </div>
                
                <div id="criteria-weight-summary" class="weight-summary" style="display: none;">
                    <div class="weight-summary-content">
                        <span class="weight-label">Soma dos pesos:</span>
                        <span id="weight-total" class="weight-total">0%</span>
                        <span id="weight-status" class="weight-status"></span>
                    </div>
                </div>

                <div id="criteria-list" class="items-list"></div>
                <div class="actions">
                    <button class="btn btn-secondary" onclick="previousStep()">‚Üê Anterior</button>
                    <button class="btn btn-primary" onclick="nextStep()">Pr√≥ximo ‚Üí</button>
                </div>
            </section>

            <!-- Passo 3: Alternativas -->
            <section id="step-3" class="step-content">
                <h2>üé≤ Defina as Alternativas</h2>
                <p class="help-text">Adicione as op√ß√µes que ser√£o avaliadas (m√≠nimo 2, m√°ximo 10)</p>
                <div class="form-group">
                    <div class="input-with-button">
                        <input type="text" id="alternative-input" placeholder="Ex: Modelo X, Modelo Y, Modelo Z" class="input-field">
                        <button class="btn btn-add" onclick="addAlternative()">‚ûï Adicionar</button>
                    </div>
                </div>
                <div id="alternatives-list" class="items-list"></div>
                <div class="actions">
                    <button class="btn btn-secondary" onclick="previousStep()">‚Üê Anterior</button>
                    <button class="btn btn-primary" onclick="nextStep()">Pr√≥ximo ‚Üí</button>
                </div>
            </section>

            <!-- Passo 4: Julgamentos -->
            <section id="step-4" class="step-content">
                <h2>‚öñÔ∏è Julgamentos Par a Par</h2>
                <p class="help-text">Compare os elementos usando a Escala de Saaty</p>
                
                <!-- Tabs for Criteria vs Alternatives -->
                <div class="tabs">
                    <button class="tab-button active" data-tab="criteria-judgments">Comparar Crit√©rios</button>
                    <button class="tab-button" data-tab="alternatives-judgments">Comparar Alternativas</button>
                </div>

                <!-- Criteria Judgments -->
                <div id="criteria-judgments" class="tab-content active">
                    <div class="judgments-header">
                        <h3>Compara√ß√£o dos Crit√©rios</h3>
                        <p>Em rela√ß√£o ao objetivo: <strong id="objective-display-1"></strong></p>
                        <div id="criteria-consistency" class="consistency-info"></div>
                    </div>
                    <div id="criteria-comparisons" class="comparisons-container"></div>
                </div>

                <!-- Alternatives Judgments -->
                <div id="alternatives-judgments" class="tab-content">
                    <div class="judgments-header">
                        <h3>Compara√ß√£o das Alternativas</h3>
                        <div class="criterion-selector">
                            <label>Crit√©rio atual:</label>
                            <select id="current-criterion" class="select-field"></select>
                        </div>
                        <div id="alternatives-consistency" class="consistency-info"></div>
                    </div>
                    <div id="alternatives-comparisons" class="comparisons-container"></div>
                </div>

                <div class="actions">
                    <button class="btn btn-secondary" onclick="previousStep()">‚Üê Anterior</button>
                    <button class="btn btn-primary" onclick="calculateResults()">Calcular Resultados ‚Üí</button>
                </div>
            </section>

            <!-- Passo 5: Resultados -->
            <section id="step-5" class="step-content">
                <h2>üèÜ Resultados da An√°lise AHP</h2>
                
                <div class="results-overview">
                    <div class="result-card">
                        <h3>Ranking das Alternativas</h3>
                        <div id="ranking-list" class="ranking-container"></div>
                    </div>

                    <div class="result-card">
                        <h3>Distribui√ß√£o de Prioridades</h3>
                        <canvas id="priorities-chart"></canvas>
                    </div>
                </div>

                <div class="result-card">
                    <h3>An√°lise Detalhada por Crit√©rio</h3>
                    <div id="detailed-analysis" class="detailed-table"></div>
                </div>

                <div class="result-card">
                    <h3>Pesos dos Crit√©rios</h3>
                    <canvas id="criteria-chart"></canvas>
                </div>

                <div class="actions">
                    <button class="btn btn-secondary" onclick="previousStep()">‚Üê Anterior</button>
                    <button class="btn btn-success" id="save-project-btn">üíæ Salvar Projeto</button>
                    <button class="btn btn-primary" onclick="resetApp()">üîÑ Nova An√°lise</button>
                </div>
            </section>
        </main>
    </div>

    <!-- Modal for Loading Projects -->
    <div id="load-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeLoadModal()">&times;</span>
            <h2>üìÇ Projetos Salvos</h2>
            <div id="projects-list"></div>
        </div>
    </div>

    <!-- Saaty Scale Reference -->
    <div class="scale-reference">
        <button class="scale-toggle" onclick="toggleScaleReference()">‚ùì Escala de Saaty</button>
        <div class="scale-content" id="scale-content">
            <h4>Escala Fundamental de Saaty</h4>
            <table>
                <tr><th>Valor</th><th>Defini√ß√£o</th></tr>
                <tr><td>1</td><td>Igual import√¢ncia</td></tr>
                <tr><td>3</td><td>Import√¢ncia moderada</td></tr>
                <tr><td>5</td><td>Import√¢ncia forte</td></tr>
                <tr><td>7</td><td>Import√¢ncia muito forte</td></tr>
                <tr><td>9</td><td>Import√¢ncia extrema</td></tr>
                <tr><td>2, 4, 6, 8</td><td>Valores intermedi√°rios</td></tr>
            </table>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="ahp.js"></script>
    <script src="app.js"></script>
</body>
</html>

